I need you to upgrade the existing Everspeak application with a full Quick-Start Persona Setup System.
This system must include:

ğŸŸ¦ 1. Bulk Memory Import (Backend + Frontend)

Create a new endpoint:

POST /api/personas/:id/memories/bulk-import

Body:

{
  "text": "raw text the user pastes",
  "auto_weight": true
}


Backend requirements:

Split pasted text into discrete memory entries

Break on newlines, periods, semicolons

Ignore empty lines

For each memory:

Auto-categorize into:
humor, regrets, childhood, advice, personality, misc

Use OpenAI GPT-4o-mini to classify each memory

Auto-assign weights (0.5â€“5.0)

sentimentality â†’ higher

trivial details â†’ lower

Save each memory into the personaâ€™s memory array

conform to existing structure

generate UUIDs

Return:

{
  "success": true,
  "imported": 12,
  "memories": [...]
}


Frontend requirements:

Add a Bulk Import Panel button inside the Memory Panel

Modal pops up with:

large textarea

â€œAuto-assign categories & weightsâ€ checkbox (default ON)

â€œImport Memoriesâ€ button

On success:

close modal

refresh memory list

display success message

Add professional styling consistent with panel design

ğŸŸ¦ 2. Quick-Start Memory Wizard (Multi-Step UI)

Add a NEW top-level UI panel:
â€œSetup Wizardâ€ â€” accessible via a button inside the Persona Panel.

Wizard Steps (Frontend Only):

Step 1 â€” Personality Snapshot

Fields:

â€œDescribe their personality in one or two sentences.â€

â€œWere they humorous, serious, soft-spoken, energetic, etc.?â€

Step 2 â€” Their Humor

â€œWhat always made them laugh?â€

â€œWhat jokes or playful things did they do?â€

Step 3 â€” Memories That Matter

â€œTell me a few moments you think of often.â€

â€œBig, small, recent, childhood â€” anything.â€

Step 4 â€” Unfinished Conversations

â€œWere there things left unsaid?â€

â€œRegrets, apologies, clarifications?â€

Step 5 â€” Tone Preference

Slider defaults for:
Humor, Honesty, Sentimentality, Energy, Advice-giving

Step 6 â€” Generate Memories

When the user finishes steps:

Package all inputs into a single block of text

Send to new endpoint:

POST /api/personas/:id/wizard

Body:

{
  "wizard_inputs": { ... all UI fields ... }
}


Backend must:

Use GPT-4o-mini to:

extract memories

categorize

weight

Add memories directly to persona

Update persona settings using tone slider defaults

Return array of created memories

Frontend must:

Show progress indicator

Auto-refresh persona panel + memory panel

Display â€œPersona Ready!â€ confirmation

Clear wizard steps afterward

Style wizard beautifully (mobile-responsive, soft modal)

ğŸŸ¦ 3. Voice-to-Text Memory Entry

Add a microphone icon next to the existing â€œAdd Memoryâ€ form.

Frontend requirements:

Use browser getUserMedia() for audio capture

Send audio blob to new endpoint:

POST /api/transcribe

Use Whisper via OpenAI API

Return text transcription

Auto-fill the Memory Text field with transcription

User can edit before submitting

If transcription fails, show â€œCould not transcribe audio.â€

Backend requirements:

Add /api/transcribe endpoint using OpenAI Whisper

Return structure:

{ "success": true, "text": "..." }

ğŸŸ¦ 4. Persona Booster (AI Audit of Persona Accuracy)

Add a button: â€œImprove Persona Accuracyâ€
Place it under the Persona Settings Panel.

Clicking the button makes a request:

POST /api/personas/:id/boost

Backend must:

Load persona

Send all memories + settings + journal entries + chat logs (if available) to GPT-4o-mini

Ask model to identify:

missing memory categories

missing traits

potential quirks

unclear personality boundaries

calibration suggestions

Return:

{
  "success": true,
  "recommendations": {
    "new_memories": [...],
    "tone_suggestions": {...},
    "boundary_flags": [...],
    "missing_categories": [...]
  }
}


Frontend must:

Open a new modal

Show recommendations in a clean, readable format

Each recommended memory should have:

â€œAddâ€ button â†’ auto-create memory

â€œDismissâ€ button

Recommended tone settings should have a button:

â€œApply Recommendationsâ€

Modal stays consistent with existing UI visual language

ğŸŸ¦ 5. Snapshot Integration

When a wizard completes, or a bulk import happens:

Automatically create a new persona snapshot named:
â€œAuto Snapshot â€“ Setup Wizard (timestamp)â€
or
â€œAuto Snapshot â€“ Bulk Import (timestamp)â€

This uses the existing snapshot system without modifications.

ğŸŸ¦ 6. Documentation

Update:

README.md

replit.md

Swagger docs

Include:

Bulk Import endpoint

Wizard endpoint

Transcription endpoint

Booster endpoint

UI notes

Use consistent formatting.

ğŸŸ¦ 7. Testing

Add Playwright tests for:

Bulk import

Wizard flow

Voice transcription (mocked)

Booster endpoint

Snapshot auto-creation

Smooth persona switching after wizard

Ensure 100% pass rate.

ğŸŸ¦ Architecture Notes

Match existing folder/project structure

Use existing utils for IDs, loading/saving JSON

Reuse OpenAI client

Maintain grounding/ethical guidelines inside AI prompts

Preserve safety rails (no supernatural assertions)

Avoid blocking synchronous fs ops

Use fs/promises everywhere

ğŸŸ¦ Deliverables

After running this prompt, you must deliver:

âœ” Full backend code additions
âœ” Full frontend UI + new modals + panels
âœ” Complete CSS additions
âœ” Updated docs
âœ” Passing Playwright test results
âœ” Architect review and confirmation
âœ” Cleaned and validated JSON data